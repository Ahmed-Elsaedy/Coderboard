<!DOCTYPE html>

<html lang="@System.Globalization.CultureInfo.CurrentCulture.Name"
      dir="@(System.Globalization.CultureInfo.CurrentCulture.TextInfo.IsRightToLeft ? "rtl" : "ltr")"
      class="h-full">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>@ViewData["Title"] - @Localizations.ApplicationName</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
        darkMode: 'class',
            theme: {
                extend: {}
            }
        }
    </script>
    <link href="~/css/site.css" rel="stylesheet" />
</head>
<body class="min-h-screen bg-slate-50 text-slate-800 dark:bg-neutral-900 dark:text-neutral-200"
      hx-boost="true"
      hx-target="#app"
      hx-swap="innerHTML transition:true"
      hx-indicator="#nav-indicator">

    <div id="nav-indicator"
         class="htmx-indicator fixed top-0 left-0 right-0 h-1 z-[999]
              bg-gradient-to-r from-indigo-500 via-sky-500 to-emerald-500
              animate-pulse shadow"></div>

    <div id="page-blocker"
         class="htmx-indicator fixed inset-0 z-[1000] flex items-center justify-center
              bg-black/30 backdrop-blur-[1px]"
         role="status" aria-live="polite" aria-label="Loading">
        <div class="flex flex-col items-center">
            <div class="w-12 h-12 rounded-full border-4 border-white/40 border-t-white animate-spin"></div>
            <p class="mt-3 text-white/90 text-sm">Working…</p>
        </div>
    </div>

    <div id="toasts" class="fixed top-4 right-4 z-[1100] space-y-3 pointer-events-none" aria-live="polite"></div>

    <nav class="sticky top-0 z-[900] bg-white/70 dark:bg-neutral-800/70 backdrop-blur border-b border-neutral-200/60 dark:border-neutral-600/60">
        <div class="max-w-6xl mx-auto px-4">
            <div class="h-14 flex items-center justify-between gap-4">
                <a asp-area="" asp-page="/Index" class="text-sm font-semibold text-neutral-900 dark:text-neutral-100 hover:text-blue-600">@Localizations.ApplicationName</a>
                <div class="flex items-center gap-2">
                    <button type="button"
                            class="inline-flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm border border-neutral-300 dark:border-neutral-700 text-neutral-800 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-neutral-800"
                            onclick="document.page?.switchLanguage()"
                            title="Switch language"
                            aria-label="Switch language">
                        <span class="font-medium">@(System.Globalization.CultureInfo.CurrentUICulture.TwoLetterISOLanguageName.ToUpper() == "AR" ? "En" : "Ar")</span>
                    </button>
                    <button type="button"
                            class="inline-flex items-center gap-2 rounded-lg px-3 py-1.5 text-sm border border-neutral-300 dark:border-neutral-700 text-neutral-800 dark:text-neutral-100 hover:bg-neutral-50 dark:hover:bg-neutral-800"
                            onclick="document.page?.toggleTheme()"
                            title="Toggle theme"
                            aria-label="Toggle theme">
                        <svg data-theme-icon="sun" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 hidden">
                            <path d="M12 18a6 6 0 100-12 6 6 0 000 12z"/><path d="M12 2v2m0 16v2m10-10h-2M4 12H2m15.364 6.364l-1.414-1.414M8.05 6.05L6.636 4.636m10.728 0l-1.414 1.414M8.05 17.95l-1.414 1.414" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <svg data-theme-icon="moon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="h-5 w-5 hidden">
                            <path d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z" />
                        </svg>
                        <span class="sr-only">Theme</span>
                    </button>
                </div>
            </div>
        </div>
        <div id="nav-indicator" class="htmx-indicator h-0.5 w-full bg-gradient-to-r from-indigo-500 via-sky-500 to-emerald-500 animate-pulse"></div>
    </nav>

    <main id="app" hx-history-elt>
        <div class="max-w-6xl mx-auto px-4 py-8">
            @RenderBody()
        </div>
    </main>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js"></script>
    <script src="~/lib/htmx/dist/htmx.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/handlebars@@4.7.8/dist/handlebars.min.js"></script>
    <script type="module" src="~/dist/site.js" asp-append-version="true"></script>
</body>
</html>
